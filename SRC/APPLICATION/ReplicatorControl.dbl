
.include "REPLICATION_INSTRUCTION" repository, enum, end

subroutine ReplicatorMenuItem
    required in menuItem, a
    endparams

    .include "WND:tools.def"
    .include "INC:system.def"
    .include "REPLICATION" repository, record="instruction"

proc

    using menuItem select

    ("R_START "),
    begin
        data sts, i4
        xcall setlog("REPLICATOR_INTERVAL","5",sts)
        xcall setlog("REPLICATOR_FULL_LOG","YES",sts)
        xcall setlog("REPLICATOR_LOG_KEYS","YES",sts)
        xcall spawn("dbr EXE:replicator.dbr",D_NOWINDOW|D_NOWAIT)
    end

    ("R_START_D"),
    begin
        data sts, i4
        xcall setlog("REPLICATOR_INTERVAL","5",sts)
        xcall setlog("REPLICATOR_FULL_LOG","YES",sts)
        xcall setlog("REPLICATOR_LOG_KEYS","YES",sts)
        xcall spawn("dbr -d EXE:replicator.dbr",D_NOWINDOW|D_NOWAIT)
    end

    ("R_STOP"),
    begin
        xcall replicate(REPLICATION_INSTRUCTION.SHUTDOWN)
    end

    ("R_CREATE"),
        xcall replicate(REPLICATION_INSTRUCTION.CREATE_TABLE,"EMPLOYEE")

    ("R_LOAD"),
        xcall replicate(REPLICATION_INSTRUCTION.CREATE_AND_LOAD_TABLE,"EMPLOYEE")

    ("R_DELETE"),
        xcall replicate(REPLICATION_INSTRUCTION.DELETE_TABLE,"EMPLOYEE")

    ("R_RELOAD"),
        xcall replicate(REPLICATION_INSTRUCTION.LOAD_TABLE,"EMPLOYEE")

    ("R_TRUNCATE"),
        xcall replicate(REPLICATION_INSTRUCTION.DELETE_ALL_ROWS,"EMPLOYEE")

    ("R_CLEAR"),
        xcall replicate(REPLICATION_INSTRUCTION.DELETE_ALL_INSTRUCTIONS)

    endusing

    xreturn

endsubroutine

